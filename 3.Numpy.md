# Numpy

### (1) Numpy란?

- 데이터 사이언스

  - 데이터 수집, 데이터 정리, 시각화, 분석 등 갈 길이 멀다

  - 단순한 데이터 계산에도 많은 시간을 뺏기게 된다

    -> 계산 작업을 편하게 해줄 도구가 Numpy!

- Numpy : Numerical Python(숫자와 관련된 파이썬 도구)



### (2) Numpy array의 생김새

- 실습파일 (파일명 : NP_array)

  

  

### (3) Numpy array를 만드는 다양한 방법

## 파이썬 리스트를 통해 생성

`numpy` 모듈의 `array` 메소드에 파라미터로 파이썬 리스트를 넘겨주면 numpy array가 리턴됩니다.

```python
array1 = numpy.array([2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31])
    
print(array1)
[ 2  3  5  7 11 13 17 19 23 29 31]
```

## 균일한 값으로 생성

`numpy` 모듈의 `full` 메소드를 사용하면, 모든 값이 같은 numpy array를 생성할 수 있습니다.

```python
array1 = numpy.full(6, 7)
    
print(array1)
[7 7 7 7 7 7]
```

### 모든 값이 0인 numpy array 생성

모든 값이 `0`인 numpy array를 생성하기 위해서는 `full` 메소드를 사용하면 되겠죠. 하지만 사실은 더 간편한 방법이 있습니다.

```python
array1 = numpy.full(6, 0)
array2 = numpy.zeros(6, dtype=int)
    
print(array1)
print()
print(array2)
[0 0 0 0 0 0]

[0 0 0 0 0 0]
```

### 모든 값이 1인 numpy array 생성

모든 값이 `1`인 numpy array를 생성하는 것도 비슷합니다. `zeros` 메소드 대신 `ones`를 사용하면 됩니다.

```python
array1 = numpy.full(6, 1)
array2 = numpy.ones(6, dtype=int)
    
print(array1)
print()
print(array2)
[1 1 1 1 1 1]

[1 1 1 1 1 1]
```

## 랜덤한 값들로 생성

어쩔 때는 임의의 값들로 배열을 생성시키고 싶습니다. 그럴 때는 `numpy`의 `random` 모듈의 `random` 함수를 사용하면 됩니다.

`numpy` 모듈 안에 `random`이라는 모듈이 있고, 그 안에 또 `random`이라는 함수가 있는 겁니다!

```python
array1 = numpy.random.random(6)
array2 = numpy.random.random(6)
    
print(array1)
print()
print(array2)
[0.42214929 0.45275673 0.57978413 0.61417065 0.39448558 0.03347601]

[0.42521953 0.65091589 0.94045742 0.18138103 0.27150749 0.8450694 ]
```

## 연속된 값들이 담긴 numpy array 생성

`numpy` 모듈의 `arange` 함수를 사용하면 연속된 값들이 담겨 있는 numpy array를 생성할 수 있습니다.

`arange` 함수는 파이썬의 기본 함수인 `range`와 굉장히 비슷한 원리로 동작하는데요. 파라미터가 1개인 경우, 2개인 경우, 3개인 경우 모두 살펴봅시다.

### 파라미터 1개

`arange(m)`을 하면 `0`부터 `m-1`까지의 값들이 담긴 numpy array가 리턴됩니다.

```python
array1 = numpy.arange(6)
print(array1)
[0 1 2 3 4 5]
```

### 파라미터 2개

`arange(n, m)`을 하면 `n`부터 `m-1`까지의 값들이 담긴 numpy array가 리턴됩니다.

```python
array1 = numpy.arange(2, 7)
print(array1)
[2 3 4 5 6]
```

### 파라미터 3개

`arange(n, m, s)`를 하면 `n`부터 `m-1`까지의 값들 중 간격이 `s`인 값들이 담긴 numpy array가 리턴됩니다.

```python
array1 = numpy.arange(3, 17, 3)
print(array1)
[ 3  6  9 12 15]
```



### (4) 모듈 별명 지어주기

- 실습파일 (파일명 : NP_array)

### (5)인덱싱, 슬라이싱

- 실습파일 (파일명 : NP_array)

### (6) Numpy 기본 연산

- 실습파일 (파일명 : NP_array)

### (7) 실습 : 신주쿠 흥부부대찌개

일본에는 한식 열풍이 불고 있습니다. 기회를 엿본 영훈이는 대기업을 퇴사하고 신주쿠에 프랜차이즈 ‘흥부부대찌개’ 가맹점을 냈습니다.

그러나 보수적인 아버지께서는 번듯한 직장을 박차고 나온 영훈이가 못마땅합니다. 아버지를 안심시켜 드리기 위해 매달 매출을 보고하려고 하는데요. 엔화(¥)로 저장한 매출 데이터를 원화(₩)로 변환하는 작업이 필요합니다.

마침 numpy를 배운 우리가 도와줄 수 있겠네요. 엔화 매출이 담겨 있는 파이썬 리스트가 주어졌습니다. 1엔에 10.08원이라고 가정하고, 원화 매출이 담긴 numpy array를 만들어 출력해 주세요.

반복문은 사용하면 안 됩니다!

주의: 자동 채점 과제입니다. 정답 출력 코드는 `print`가 없는 방식으로 작성해 주세요. (예시: `won_array`)



> 정답 Code

```python
import numpy as np

revenue_in_yen = [
    300000, 340000, 320000, 360000, 
    440000, 140000, 180000, 340000, 
    330000, 290000, 280000, 380000, 
    170000, 140000, 230000, 390000, 
    400000, 350000, 380000, 150000, 
    110000, 240000, 380000, 380000, 
    340000, 420000, 150000, 130000, 
    360000, 320000, 250000
]

# 코드를 작성하세요.
revenue_in_yen = np.array(revenue_in_yen)
won_array = revenue_in_yen * 10.08
# 정답 출력
won_array
```



> 해설

`revenue_in_yen`에 엔화(¥) 매출 데이터가 담겨 있습니다.

```python
import numpy as np

revenue_in_yen = [
    300000, 340000, 320000, 360000, 
    440000, 140000, 180000, 340000, 
    330000, 290000, 280000, 380000, 
    170000, 140000, 230000, 390000, 
    400000, 350000, 380000, 150000, 
    110000, 240000, 380000, 380000, 
    340000, 420000, 150000, 130000, 
    360000, 320000, 250000
]
```

1엔이 10.08원이라고 가정했으니까, 우리는 이 모든 숫자들에 10.08을 곱해주면 되겠죠.

numpy array를 사용하면, 모든 데이터에 같은 숫자를 한 번에 곱해줄 수 있습니다.

먼저 주어진 리스트를 numpy array로 만듭니다.

```python
yen_array = np.array(revenue_in_yen)
```

이제 이 numpy array에는 곱셈 연산을 적용할 수 있습니다.

```python
won_array = yen_array * 10.08
won_array # 정답 출력
array([ 3024000.,  3427200.,  3225600.,  3628800.,  4435200.,  1411200.,
        1814400.,  3427200.,  3326400.,  2923200.,  2822400.,  3830400.,
        1713600.,  1411200.,  2318400.,  3931200.,  4032000.,  3528000.,
        3830400.,  1512000.,  1108800.,  2419200.,  3830400.,  3830400.,
        3427200.,  4233600.,  1512000.,  1310400.,  3628800.,  3225600.,
        2520000.])
```

이제 원화(₩) 데이터를 얻었습니다!



### (8) 실습 : 흥부부대찌개 LA 진출

흥부부대찌개 신주쿠점의 흥행에 성공한 영훈이는 여세를 몰아 LA에도 가맹점을 하나 냈습니다.

이제 아버지께 매출을 보고하기 위한 프로세스가 조금 복잡해졌습니다. 각 지점의 매출을 원화로 변환시키고 더해야 하죠. 1엔에 10.08원, 1달러에 1138원이라고 가정하세요. 그리고 두 지점의 매출의 합이 원화로 담긴 numpy array를 만들어 출력해주세요.

반복문은 사용하면 안 됩니다!

주의: 자동 채점 과제입니다. 정답 출력 코드는 `print`가 없는 방식으로 작성해 주세요. (예시: `won_array`)



> 정답 Code

```python
import numpy as np

revenue_in_yen = [
    300000, 340000, 320000, 360000, 
    440000, 140000, 180000, 340000, 
    330000, 290000, 280000, 380000, 
    170000, 140000, 230000, 390000, 
    400000, 350000, 380000, 150000, 
    110000, 240000, 380000, 380000, 
    340000, 420000, 150000, 130000, 
    360000, 320000, 250000
]

revenue_in_dollar = [
    1200, 1600, 1400, 1300, 
    2100, 1400, 1500, 2100, 
    1500, 1500, 2300, 2100, 
    2800, 2600, 1700, 1400, 
    2100, 2300, 1600, 1800, 
    2200, 2400, 2100, 2800, 
    1900, 2100, 1800, 2200, 
    2100, 1600, 1800
]

yen_revenue = np.array(revenue_in_yen)
dollar_revenue = np.array(revenue_in_dollar)
won_array = yen_revenue * 10.08 + dollar_revenue * 1138

won_array
```



> 해설

`revenue_in_yen`에 엔화(¥) 매출 데이터가, `revenue_in_dollar`에 달러($) 매출 데이터가 담겨 있습니다.

```python
import numpy as np

revenue_in_yen = [
    300000, 340000, 320000, 360000, 
    440000, 140000, 180000, 340000, 
    330000, 290000, 280000, 380000, 
    170000, 140000, 230000, 390000, 
    400000, 350000, 380000, 150000, 
    110000, 240000, 380000, 380000, 
    340000, 420000, 150000, 130000, 
    360000, 320000, 250000
]

revenue_in_dollar = [
    1200, 1600, 1400, 1300, 
    2100, 1400, 1500, 2100, 
    1500, 1500, 2300, 2100, 
    2800, 2600, 1700, 1400, 
    2100, 2300, 1600, 1800, 
    2200, 2400, 2100, 2800, 
    1900, 2100, 1800, 2200, 
    2100, 1600, 1800
]
```

조금 복잡하지만, 앞선 과제와 원리는 같습니다.

원화로 계산하기 위해서는 엔화 데이터에 10.08을, 달러 데이터에 1138을 곱해주어야 합니다.

리스트에 있는 모든 값에 곱셈을 동시에 해주기 위해, 엔화 데이터 `revenue_in_yen`와 달러 데이터 `revenue_in_dollar` 모두 numpy array로 만들어 줍시다.

```python
yen_array = np.array(revenue_in_yen)
dollar_array = np.array(revenue_in_dollar)
```

이제 이 numpy array에 각 환율을 곱한 뒤, 함께 더해주면 원화를 구할 수 있습니다.

```python
won_array = yen_array * 10.08 + dollar_array * 1138
won_array # 정답 출력
array([ 4389600.,  5248000.,  4818800.,  5108200.,  6825000.,  3004400.,
        3521400.,  5817000.,  5033400.,  4630200.,  5439800.,  6220200.,
        4900000.,  4370000.,  4253000.,  5524400.,  6421800.,  6145400.,
        5651200.,  3560400.,  3612400.,  5150400.,  6220200.,  7016800.,
        5589400.,  6623400.,  3560400.,  3814000.,  6018600.,  5046400.,
        4568400.])
```



### (9) Numpy 불린(Boolean) 연산

- 실습파일 (파일명 : NP_array)



### (10) 흥부부대찌개 목표 일 매출

영훈이가 창업한 흥부부대찌개 신주쿠점은 이제 직장인들에게 소문난 맛집입니다. 그러나 매일같이 성공적인 것은 아닙니다. 목표 일 매출을 달성하지 못하는 날들이 아직 꽤 있거든요. 영훈이가 생각하는 성공적인 하루 매출은 20만 엔입니다.

성공적이지 않은 날의 매출만 골라서 보고 싶습니다. 20만 엔 이하의 매출만 담긴 numpy array를 출력해주세요. 반복문은 사용하면 안 됩니다!

주의: 자동 채점 과제입니다. 정답 출력 코드는 `print` 없이 작성해 주세요. (예시: `bad_days_revenue`)



> 정답 Code

```python
import numpy as np

revenue_in_yen = [
    300000, 340000, 320000, 360000, 
    440000, 140000, 180000, 340000, 
    330000, 290000, 280000, 380000, 
    170000, 140000, 230000, 390000, 
    400000, 350000, 380000, 150000, 
    110000, 240000, 380000, 380000, 
    340000, 420000, 150000, 130000, 
    360000, 320000, 250000
]

# 코드를 작성하세요.
yen_revenue = np.array(revenue_in_yen)
filter = np.where(yen_revenue<=200000)
bad_days_revenue = yen_revenue[filter]
# 정답 출력
bad_days_revenue
```



> 해설

```python
numpy array의 좋은 점은 리스트 안의 데이터를 반복문 없이 한 번에 분석할 수 있다는 것입니다.

우리의 매출이 revenue_in_yen 이라는 변수에 리스트 형태로 들어 있습니다.

import numpy as np

revenue_in_yen = [
    300000, 340000, 320000, 360000, 
    440000, 140000, 180000, 340000, 
    330000, 290000, 280000, 380000, 
    170000, 140000, 230000, 390000, 
    400000, 350000, 380000, 150000, 
    110000, 240000, 380000, 380000, 
    340000, 420000, 150000, 130000, 
    360000, 320000, 250000
]
numpy의 도움을 받기 위해서는 numpy array로 만들어 주어야겠죠?

yen_array = np.array(revenue_in_yen)
그리고 주어진 조건에 해당하는 filter를 만들어 줍시다.

filter = np.where(yen_array < 200000)
filter # 결과 확인
(array([ 5,  6, 12, 13, 19, 20, 26, 27]),)
우리가 원하는 데이터가 어디에 있는지 확인할 수 있네요.

이 filter를 인덱싱에 활용해주면, 우리가 원하는 결과를 얻을 수 있습니다.

bad_days_revenue = yen_array[filter]
bad_days_revenue # 정답 출력
array([140000, 180000, 170000, 140000, 150000, 110000, 150000, 130000])
정리하면 이런 코드가 되겠네요.

import numpy as np

revenue_in_yen = [
    300000, 340000, 320000, 360000, 
    440000, 140000, 180000, 340000, 
    330000, 290000, 280000, 380000, 
    170000, 140000, 230000, 390000, 
    400000, 350000, 380000, 150000, 
    110000, 240000, 380000, 380000, 
    340000, 420000, 150000, 130000, 
    360000, 320000, 250000
]

yen_array = np.array(revenue_in_yen)

filter = np.where(yen_array < 200000)
bad_days_revenue = yen_array[filter]

bad_days_revenue # 정답 출력
아래와 같이 where 메소드로 filter를 만들지 않고 바로 인덱싱하는 방법도 있다는 것! 참고하세요.

import numpy as np

revenue_in_yen = [
    300000, 340000, 320000, 360000, 
    440000, 140000, 180000, 340000, 
    330000, 290000, 280000, 380000, 
    170000, 140000, 230000, 390000, 
    400000, 350000, 380000, 150000, 
    110000, 240000, 380000, 380000, 
    340000, 420000, 150000, 130000, 
    360000, 320000, 250000
]

yen_array = np.array(revenue_in_yen)

bad_days_revenue = yen_array[yen_array < 200000]

bad_days_revenue # 정답 출력
```



### (11) Numpy array  VS Python list

둘은 비슷한 점이 굉장히 많다. 여러 값을 보관한다는 공통점이 있기 때문

- Numpy array 쓰는 이유?

  - 각 배열의 값을 바꾸기 쉽다 (사칙연산에 대하여)

  - Python은 인덱스에 해당하는 값들 자체가 더해지는 것이 아니니까!

- Numpy 장점
  - 문법이 간단하다!
  - __성능이 뛰어나다!__ (실행속도가 많이 빠르다!)

- 성능 차이의 이유?
  - 넘파이 내에는 같은 Type의 값들만 들어갈 수 있기 때문에 연산 속도가 빠르다.
  - 반대로 파이썬은 리스트 내에 int,float,str,list 등 모든 Type이 들어가기에 느리다.

- 그럼 둘 중에 뭐를 사용?
  - Python : 값을 추가하고 제거하는 일 할 때!
  - Numpy : 수치 계산이 많고 복잡할 때!



### (12) Numpy 기본 통계

numpy 라이브러리는 기본적인 통계 기능도 제공합니다.

## 최댓값, 최솟값

`max` 메소드와 `min` 메소드를 사용하면 numpy array의 최댓값과 최솟값을 구할 수 있습니다.

```python
import numpy as np

array1 = np.array([14, 6, 13, 21, 23, 31, 9, 5])

print(array1.max()) # 최댓값
print(array1.min()) # 최솟값
31
5
```

## 평균값

`mean` 메소드를 사용하면 numpy array의 평균값을 구할 수 있습니다.

```python
import numpy as np

array1 = np.array([14, 6, 13, 21, 23, 31, 9, 5])

print(array1.mean()) # 평균값
15.25
```

위 예시에서, 총합(14+6+13+21+23+31+9+514+6+13+21+23+31+9+5)을 총 개수(88)로 나누면 15.2515.25입니다.

## 중앙값

`median` 메소드를 사용하면 중간값을 구할 수 있는데요. 특이하게 `median`은 numpy array의 메소드가 아니라 numpy의 메소드입니다.

```python
import numpy as np

array1 = np.array([8, 12, 9, 15, 16])
array2 = np.array([14, 6, 13, 21, 23, 31, 9, 5])

print(np.median(array1)) # 중앙값
print(np.median(array2)) # 중앙값
12.0
13.5
```

`array1`을 정렬하면 중앙값이 1212입니다.

`array2`에는 짝수개의 요소가 있기 때문에 중앙값이 1313과 1414 두 개입니다. 둘의 평균값을 내면 13.513.5입니다.

## 표준 편차, 분산

표준 편차와 분산은 값들이 평균에서 얼마나 떨어져 있는지 나타내는 지표입니다. 잘 모르신다면 일단 넘어가셔도 좋습니다.

```python
import numpy as np

array1 = np.array([14, 6, 13, 21, 23, 31, 9, 5])

print(array1.std()) # 표준 편차
print(array1.var()) # 분산
8.496322733983215
72.1875
```

